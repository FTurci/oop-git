<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.40">

  <title>Object-Oriented Programming and Software Engineering â€“ Hands on objects and classes</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-2f8bbe72a2998faa362496cdf9fa9bee.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="../site_libs/quarto-diagram/mermaid.min.js"></script>
  <script src="../site_libs/quarto-diagram/mermaid-init.js"></script>
  <link href="../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Hands on objects and classes</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="aims" class="title-slide slide level2 center">
<h2>Aims</h2>
<ul>
<li>Define the essential properties of our simulation and identify them as objects</li>
<li>Recall the main syntactical aspects of C++ classes</li>
<li>Implement the main structure of the class representing the simulated system</li>
</ul>
</section>

<section id="learning-outcomes" class="title-slide slide level2 center">
<h2>Learning outcomes</h2>
<ul>
<li>Familiarise with the rules of Vicsek flocking model</li>
<li>Practice object-oriented design choices in C++</li>
</ul>
</section>

<section>
<section id="object-oriented-programming-is-about-actions-between-objects" class="title-slide slide level2 center">
<h2>Object-oriented programming is about actions between objects</h2>
<p>A lot of your programming up to now has been data-centric: you received data, often simply tabulated numerical data, and then you have manipulated it using suitable functions, occasionally custom designed. In this sense, programming boils down to retrieving data, processing it with suitable functions, and produce new data (to be eventually processed again). This <strong>procedural</strong> programming is very linear, but is often very problem specific: your program finally consists of a well defined pipeline of steps where the data get progressively manipulated. The code becomes easily quite long and complicated.</p>
</section>
<section class="slide level3">

<p>Object-oriented programming is different: the idea is to look at the problem that you want to solve and identify intelligent ways to break it down into generic, smaller problems.</p>
<p>In particular, the goal is to group variables and functions together into <strong>new data types</strong> that enjoy new properties and relationships. This allows you to break down a complex code into simpler parts.</p>
<p>From this description it is clear that object-oriented programming (OOP) will be:</p>
<ul>
<li>unsuitable for small projects that can be addressed with standard or existing data types</li>
<li>very suitable when considering new problems, with many different parts interacting in various different ways</li>
</ul>
<p>To make object-oriented interesting, here we are considering an explicit example where <em>reasoning</em> in terms of objects helps us <em>design</em> our code.</p>
<div class="columns">
<div class="column" style="width:50%;">
<h4 id="procedural-code">Procedural Code</h4>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb1-1"><a></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb1-2"><a></a></span>
<span id="cb1-3"><a></a><span class="dt">double</span> calculate_area<span class="op">(</span><span class="dt">double</span> length<span class="op">,</span> <span class="dt">double</span> width<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-4"><a></a>    <span class="cf">return</span> length <span class="op">*</span> width<span class="op">;</span></span>
<span id="cb1-5"><a></a><span class="op">}</span></span>
<span id="cb1-6"><a></a></span>
<span id="cb1-7"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb1-8"><a></a>    <span class="dt">double</span> length <span class="op">=</span> <span class="fl">5.0</span><span class="op">,</span> width <span class="op">=</span> <span class="fl">3.0</span><span class="op">;</span></span>
<span id="cb1-9"><a></a>    <span class="dt">double</span> area <span class="op">=</span> calculate_area<span class="op">(</span>length<span class="op">,</span> width<span class="op">);</span></span>
<span id="cb1-10"><a></a></span>
<span id="cb1-11"><a></a>    <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">"Area: "</span> <span class="op">&lt;&lt;</span> area <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-12"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-13"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:50%;">
<h4 id="object-oriented-code">Object-Oriented Code</h4>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb2-1"><a></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb2-2"><a></a><span class="co">// Rectangle class to represent a rectangle</span></span>
<span id="cb2-3"><a></a><span class="kw">class</span> Rectangle <span class="op">{</span></span>
<span id="cb2-4"><a></a>    <span class="kw">public</span><span class="op">:</span></span>
<span id="cb2-5"><a></a>        <span class="dt">double</span> length<span class="op">;</span></span>
<span id="cb2-6"><a></a>        <span class="dt">double</span> width<span class="op">;</span></span>
<span id="cb2-7"><a></a>        <span class="co">// Constructor</span></span>
<span id="cb2-8"><a></a>        Rectangle<span class="op">(</span><span class="dt">double</span> l<span class="op">,</span> <span class="dt">double</span> w<span class="op">)</span> <span class="op">:</span> length<span class="op">(</span>l<span class="op">),</span> width<span class="op">(</span>w<span class="op">)</span> <span class="op">{}</span></span>
<span id="cb2-9"><a></a>        <span class="co">// Member function with its implementation</span></span>
<span id="cb2-10"><a></a>        <span class="dt">double</span> calculate_area<span class="op">()</span> <span class="op">{</span></span>
<span id="cb2-11"><a></a>            <span class="cf">return</span> length <span class="op">*</span> width<span class="op">;</span></span>
<span id="cb2-12"><a></a>        <span class="op">}</span></span>
<span id="cb2-13"><a></a><span class="op">};</span></span>
<span id="cb2-14"><a></a></span>
<span id="cb2-15"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb2-16"><a></a>    Rectangle rect<span class="op">(</span><span class="fl">5.0</span><span class="op">,</span> <span class="fl">3.0</span><span class="op">);</span></span>
<span id="cb2-17"><a></a>    <span class="dt">double</span> area <span class="op">=</span> rect<span class="op">.</span>calculate_area<span class="op">();</span></span>
<span id="cb2-18"><a></a>    <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">"Area: "</span> <span class="op">&lt;&lt;</span> area <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb2-19"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-20"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section></section>
<section>
<section id="modelling-flocking-using-the-vicsek-model" class="title-slide slide level2 center">
<h2>Modelling flocking using the Vicsek model</h2>
<p>In this mini-project, we are using a minimal model of flocking as our simple application of object-oriented programming to scientific computing.</p>
<p>Wew use the <strong>Vicsek</strong> model, a celebrated model to describe the behaviour of self-propelled agents subject to alignment interactions.</p>
<p>The problem is two-dimensional. It simulates the collective behavior of self-propelled particles that align their velocities with their neighbors within a certain radius. Each particle moves in a random direction and adjusts its orientation to match the average direction of nearby particles, leading to the emergence of coordinated motion or flocking.</p>
</section>
<section class="slide level3 scrollable">

<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Algorithm</strong></p>
</div>
<div class="callout-content">
<p>The 2D Vicsek model algorithm can be described in these steps:</p>
<ol type="1">
<li><p><strong>Initialize</strong>: Place <span class="math inline">\(N\)</span> particles at random positions <span class="math inline">\(\mathbf{r}_i\)</span> with random velocities <span class="math inline">\(\mathbf{v}_i = v (\cos\theta_i, \sin\theta_i)\)</span>, where <span class="math inline">\(\theta_i\)</span> is the orientation angle.</p></li>
<li><p><strong>Neighbor Identification</strong>: For each particle <span class="math inline">\(i\)</span>, identify neighbors within radius <span class="math inline">\(r\)</span>.</p></li>
<li><p><strong>Alignment</strong>: Compute the average direction of neighbors, including <span class="math inline">\(i\)</span>: <span class="math display">\[
\bar{\theta}_i = \text{atan2}\left(\sum_{\rm j \in neighbours} \sin\theta_j, \sum_{\rm j \in neighbours} \cos\theta_j\right)
\]</span></p></li>
<li><p><strong>Noise</strong>: Add a random perturbation <span class="math inline">\(u\)</span> to the orientation as a random variable uniformly distributed in the interval <span class="math inline">\([-\eta/2,\eta/2]\)</span>, where <span class="math inline">\(\eta\)</span> is teh noise strength</p>
<p><span class="math display">\[
\theta_i^{\text{new}} = \bar{\theta}_i + u
\]</span></p></li>
<li><p><strong>Update Position</strong>: Move each particle with its updated velocity: <span class="math display">\[
\mathbf{r}_i^{\text{new}} = \mathbf{r}_i + \mathbf{v}_i \Delta t
\]</span></p></li>
<li><p><strong>Repeat</strong>: Iterate for the desired number of time steps.</p></li>
</ol>
</div>
</div>
</div>
</section>
<section id="section" class="slide level3">
<h3></h3>
<p>From the algorithm above we can extract a few key conceptual entities needed for our simulation</p>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">classDiagram
 direction LR
    class System{
      %% particle_number
      %% noise_strength
      %%list~Particle~ particles
      %%update_rule()
  
    }

    class Box {
        %%size
        %%boundary_conditions
    }

    class Particle {
        %%position
        %%orientation
    }
  System --&gt; Box : contains
  System "1" --&gt; "N" Particle : contains

</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>Our goal is now to concretely construct C++ objects around these various components. The natural organisation in C++ is to have different files for the different objects, separating their declarations and the implementations. In practice this means having</p>
<ul>
<li>a <code>.h</code> file (a <strong>header</strong> file) for every object to describe its structure and contain the <strong>declarations</strong></li>
<li>a <code>.cpp</code> file (a <strong>source</strong> file) to specify how the object works and contain the the <strong>implementation</strong></li>
</ul>
<p>We will use the example of the <code>System</code> class to recall some essential elements of <code>C++</code> object orientation.</p>
</section></section>
<section>
<section id="the-system-class" class="title-slide slide level2 center">
<h2>The <code>System</code> class</h2>

</section>
<section id="generic-class-structure" class="slide level3">
<h3>Generic class structure</h3>
<p>The declaration of a generic C++ class has a standard structure</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb3-1"><a></a></span>
<span id="cb3-2"><a></a><span class="kw">class</span> MyClass <span class="op">{</span> <span class="co">// UpperCamelCase convention</span></span>
<span id="cb3-3"><a></a>  <span class="kw">public</span><span class="op">:</span></span>
<span id="cb3-4"><a></a>    Myclass<span class="op">();</span> <span class="co">//default constructor</span></span>
<span id="cb3-5"><a></a></span>
<span id="cb3-6"><a></a>    <span class="dt">int</span> memberVariable<span class="op">;</span>  </span>
<span id="cb3-7"><a></a>    <span class="dt">float</span> memberFunction<span class="op">();</span></span>
<span id="cb3-8"><a></a></span>
<span id="cb3-9"><a></a><span class="op">};</span> <span class="co">// remember this semicolon!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Objects organise data and functions. The data are stored as <strong>member variables</strong> (also called <strong>attributes</strong>) and functions specific to the object are called <strong>member functions</strong> (also called <strong>methods</strong>). Member functions and variables can be <code>public</code> or <code>private</code>.</p>
</section>
<section id="instantiation" class="slide level3">
<h3>Instantiation</h3>
<p>A class declaration is barely the description of the <strong>content</strong> of an object.</p>
<p>In order to use objects we need to construct them first. The process of constructing objects is called <strong>instantiation</strong>: we can have indeed many separate <strong>instances</strong> of the same object.</p>
<p>Every instantiation runs a particular member function of the object, called the <strong>constructor</strong>. The constructor always has the same name as the class itself and clearly has no type associated with it because what it returns is precisely an object of the type defined by the class.</p>
<p>For example, the class above is named <code>MyClass</code> so it has a member function called <code>MyClass()</code> (notice the brackets). When we want to instantiate an object of such class we just type</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb4-1"><a></a>MyClass anInstance<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But could as well have multiple instances of the same class</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb5-1"><a></a>MyClass instance1<span class="op">;</span></span>
<span id="cb5-2"><a></a>MyClass instance2<span class="op">;</span></span>
<span id="cb5-3"><a></a>MyClass instance3<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But what does the constructor actually do? In fact, up to now, we did not specify anything. Indeed, we have not yet written any implementation of the class. We will see this very soon in the section below.</p>
<p>At the moment, let us now apply these broad ideas to the specific concept of our <code>System</code> class.</p>
</section>
<section id="declaration" class="slide level3">
<h3>Declaration</h3>
<p>The header file for our <code>System</code> class needs precisely to mirror the structure above.</p>
<p>Since a header file can be imported multiple times by various nested objects, it is good practice to confine the code inside so called <strong>headr guards</strong>, <code>#ifndef/#define</code> statements that make the inclusion of the header optional if the header as already been included.</p>
<p>This means that the basic structure of hour <code>system.h</code> file will be</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb6-1"><a></a><span class="pp">#ifndef SYSTEM_H</span></span>
<span id="cb6-2"><a></a><span class="pp">#define SYSTEM_H</span></span>
<span id="cb6-3"><a></a></span>
<span id="cb6-4"><a></a><span class="kw">class</span> System <span class="op">{</span></span>
<span id="cb6-5"><a></a>  <span class="kw">public</span><span class="op">:</span></span>
<span id="cb6-6"><a></a>    System<span class="op">();</span></span>
<span id="cb6-7"><a></a><span class="op">};</span></span>
<span id="cb6-8"><a></a></span>
<span id="cb6-9"><a></a><span class="pp">#endif</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is a bare-bone <code>System</code>: it has nothing specific to our model. We can now sculpt the class the fit what we believe our system should have. For example, here is what we may sketch as a design, where we distinguish member variables from functions</p>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">classDiagram
 direction LR
    class System{
      particleNumber
      noiseStrength
      simulationBox
      vector~Particle~ particles
      System()
      updateRule()
      
      }

</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>We have a few member variables:</p>
<ul>
<li>the total number of particles</li>
<li>the noise strength in Vicsek model</li>
<li>a simulation box</li>
<li>a vector containing all the particles</li>
</ul>
</section>
<section class="slide level3">

<p>Since C++ is a typed language, we need to think of the types of such variables</p>
<ul>
<li>the total number of particles â†’ it is an integer <code>int</code></li>
<li>the noise strength in Vicsek model â†’ it is a floating point number <code>double</code></li>
<li>a simulation box â†’ it is going to be an instance of a yet-to-be-defined class <code>Box</code></li>
<li>a vector containing all the particles â†’ it is a vector of a yet-to-be-defined class <code>Particle</code></li>
</ul>
<p>The <code>System</code> class also contains two member functions:</p>
<ul>
<li>the constructor, which return an instance of the class</li>
<li>an update rule to implement the Vicsek dynamics, which just updates the particles, so it is probably of type <code>void</code></li>
</ul>
</section>
<section class="slide level3">

<p>With this in mind we can translate these <strong>design ideas</strong> into an actual class structure that is specific to our problem</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb7-1"><a></a><span class="pp">#ifndef SYSTEM_H</span></span>
<span id="cb7-2"><a></a><span class="pp">#define SYSTEM_H</span></span>
<span id="cb7-3"><a></a></span>
<span id="cb7-4"><a></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span><span class="pp"> </span><span class="co">//to use standard C++ vectors</span></span>
<span id="cb7-5"><a></a><span class="pp">#include </span><span class="im">"box.h"</span><span class="pp"> </span><span class="co">//yet to be created!</span></span>
<span id="cb7-6"><a></a><span class="pp">#include </span><span class="im">"particle.h"</span><span class="pp"> </span><span class="co">//yet to be created!</span></span>
<span id="cb7-7"><a></a></span>
<span id="cb7-8"><a></a><span class="kw">class</span> System <span class="op">{</span></span>
<span id="cb7-9"><a></a>  <span class="kw">public</span><span class="op">:</span></span>
<span id="cb7-10"><a></a>    System<span class="op">();</span></span>
<span id="cb7-11"><a></a>    <span class="dt">int</span>   particleNumber<span class="op">;</span></span>
<span id="cb7-12"><a></a>    <span class="dt">double</span> noiseStrength<span class="op">;</span></span>
<span id="cb7-13"><a></a>    Box simulationBox<span class="op">;</span></span>
<span id="cb7-14"><a></a>    <span class="bu">std::</span>vector<span class="op">&lt;</span>Particle<span class="op">&gt;</span> particles<span class="op">;</span></span>
<span id="cb7-15"><a></a></span>
<span id="cb7-16"><a></a>    <span class="dt">void</span> updateRule<span class="op">();</span></span>
<span id="cb7-17"><a></a><span class="op">};</span></span>
<span id="cb7-18"><a></a></span>
<span id="cb7-19"><a></a><span class="pp">#endif</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Notice that we added an <code>include</code> statement to use the <code>std::vector</code> for the C++ standard library and construct a vector of particles. Also note that we are also including the definitions of the <code>Box</code> and the <code>Particle</code> classes, which we have not yet written!</p>
</section>
<section class="slide level3">

<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Task 1: header file</strong></p>
</div>
<div class="callout-content">
<p>Create a header file for the <code>System</code> class that mirrors the instructions above.</p>
<p>(Optional but recommended) Add the files to your <code>git</code> repository and commit the changes.</p>
</div>
</div>
</div>
</section>
<section id="basic-implementation" class="slide level3">
<h3>Basic implementation</h3>
<p>Now that we have the overall description of the class, we want to implement it. What is missing specifically are the instructions for the default constructor <code>System()</code> and the member function <code>updateRule()</code>. these are to be stored in the source file <code>system.cpp</code>. In it, we include the definitions provided in the header file and then refer to the member functions of a particular class using the <code>::</code> operator</p>
<p>So, our <code>system.cpp</code> file will start with including the respective header file via</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb8-1"><a></a><span class="pp">#include </span><span class="im">"system.h"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and then proceed specifying each member function separately.For example, for the <code>updateRule()</code> member function we will have</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb9-1"><a></a><span class="dt">void</span> System<span class="op">::</span>updateRule<span class="op">(){</span></span>
<span id="cb9-2"><a></a>  <span class="co">// the Vicsek update rule...</span></span>
<span id="cb9-3"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And for the constructor we will have instead</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb10-1"><a></a>System<span class="op">::</span>System<span class="op">(){</span></span>
<span id="cb10-2"><a></a>  <span class="co">// whatever we want to do as we instantiate the system</span></span>
<span id="cb10-3"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section class="slide level3">

<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Task 2: Simple implementation and instantiation</strong></p>
</div>
<div class="callout-content">
<p>Create a <code>system.cpp</code> file and implement the constructor and the update rule such that :</p>
<ul>
<li>the constructor prints <code>I am constructing the System!</code></li>
<li>the update rule prints <code>Updating the system...</code></li>
</ul>
<p>Remember that you need the <code>&lt;iostream&gt;</code> library to be included in order to be able to print using the <strong>standard C++ library</strong> (you should know how to do this from Teaching Block 1).</p>
<p>Then, comment out (for now) the <code>Box simulationBox;</code> and the <code>std::vector&lt;Particle&gt; particles;</code> lines from the header file and their <strong>associated header files</strong>.</p>
<p>Now, in the <code>main.cpp</code> file (that should be in the same folder), inside the <code>main</code> function, instantiate a <code>System</code> object.</p>
<p>Compile your code, either by using a Makefile (see <a href="../wp_gitgithub/make">here</a>) or by directly using the compiler with</p>
<pre><code>g++ main.cpp system.cpp -o myvicsek</code></pre>
<p>and run it with (or with whatever name you have given tour executable)</p>
<pre><code>./myvicsek</code></pre>
<p>You should see the following output in the command line:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource console number-lines code-with-copy"><code class="sourceCode"><span id="cb13-1"><a></a>$ ./myvicsek</span>
<span id="cb13-2"><a></a>I am constructing the System!</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(Optional but recommended) Add the files to your <code>git</code> repository and commit the changes.</p>
</div>
</div>
</div>
</section>
<section class="slide level3">

<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Task 3: Calling a member function</strong></p>
</div>
<div class="callout-content">
<p>Can you modify the <code>main.cpp</code> file to call the member function <code>updateRule()</code> after instantiating your object? Notice that (differently from the default constructor we wrote above) this uses parenthesis even if it doesnâ€™t take any arguments. Since you use a member function of an instance of a class, you <strong>must use</strong> the <strong>dot</strong> operator <code>.</code> as:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb14-1"><a></a>instance<span class="op">.</span>memberFunction<span class="op">();</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="a-more-meaningful-constructor" class="slide level3">
<h3>A more meaningful constructor</h3>
<p>We have now a working basic class. It does not do much and it does not even store any data, but it should work. Ideally, we would instead like to construct our system so that it can at least store some parameters of our model to be used later on. To do so we need to enrich the constructor, since the default constructor is taking no arguments.</p>
<p>There are several parameters that it may be useful to pass to the constructor. Some may be worth storing in the <code>System</code> object as member variables, some may not, depending on your design choices.</p>
<p>Parameters that are meaningful to pass to the constructor could be:</p>
<ul>
<li>the total number of particles <code>N</code> (mentioned earlier)</li>
<li>the noise strength (mentioned earlier)</li>
</ul>
<p>but we may want to have more, for example:</p>
<ul>
<li>the size of the system (if it is a square box, it would be just its side)</li>
<li>the time step of the simulation</li>
</ul>
<p>To do this, we need to modify the constructor declaration to take these parameters as arguments. We will also need to update the implementation of the constructor to initialize the member variables with these parameters.</p>
</section>
<section class="slide level3">

<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Task 4: Improve the constructor declaration</strong></p>
</div>
<div class="callout-content">
<p>Modify the <code>System</code> class declaration in <code>system.h</code> so that</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb15-1"><a></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb15-2"><a></a>    System<span class="op">();</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>is turned into</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb16-1"><a></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb16-2"><a></a>    System<span class="op">(</span><span class="dt">int</span> particleNumber<span class="op">,</span><span class="dt">double</span> sideLength<span class="op">,</span> <span class="dt">double</span> timeStep<span class="op">,</span><span class="dt">double</span> noiseStrength<span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Try to compile the code again: can you explain the error messages?</p>
<p>(Optional but recommended) Commit the changes to your repository via <code>git</code>.</p>
</div>
</div>
</div>
</section>
<section id="using-this" class="slide level3">
<h3>Using <code>this</code></h3>
<p>Such changes need then to be mirrored in the implementation, i.e.&nbsp;the <code>.cpp</code> file. Here we need to be able to refer specifically to the member variables of the class in an unambiguous way. The way C++ does this is by using the keyword <code>this</code>.</p>
<div class="callout callout-important no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p>Technically <code>this</code> is a pointer to the current object (i.e.&nbsp;the memory address of the object) so to access any of its members (variables or ) is done using the <code>-&gt;</code> operator with the syntax</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb17-1"><a></a><span class="kw">this</span><span class="op">-&gt;</span>memberVariable <span class="op">=</span> <span class="op">...;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>When instead one accesses member functions and variables directly from an object instance one uses the <code>.</code> operator</p>
</div>
</div>
</div>
<p>So, for every parameter that we get through the constructor, we can use the <code>this-&gt;</code> construction to store it into a member variable.</p>
</section>
<section class="slide level3">

<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Task 5: Assigning member variables</strong></p>
</div>
<div class="callout-content">
<p>Edit the <code>system.cpp</code> file so that the constructor now mirrors its declaration in the <code>system.h</code> file and stores the following parameters in the corresponding member variables:</p>
<ul>
<li>the particle number</li>
<li>the noise strength</li>
</ul>
<p>Modify the <code>main.cpp</code> file so that now you call the constructor with suitable parameters. For this it is sufficient to use <code>(...)</code> (with the dots replaced by the required parameters) after the name of the instance. From the <code>main()</code> function, use a <code>cout</code> statement to print out the values of the particle number and noise after the construction of your instance of the class <code>System</code>.</p>
<p>Take the following numerical values:</p>
<ul>
<li>100 particles</li>
<li>side length 20.0</li>
<li>timestep of 0.5</li>
<li>noise strength 0.1</li>
</ul>
<p>The units of these quantities will become apparent when we will discuss the details of the model in the next workshop.</p>
<p>Compile and run.</p>
<p>(Optional but recommended) Commit the changes to your <code>git</code> repository.</p>
</div>
</div>
</div>
</section>
<section class="slide level3">

<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Task 6: Adjusting the design and the implementation</strong></p>
</div>
<div class="callout-content">
<p>Now modify both the declaration (<code>system.h</code>) and the implementation (<code>system.cpp</code>) so that you can also store the timestep and the side length.</p>
<p>(Optional but recommended) Commit the changes to your <code>git</code> repository.</p>
</div>
</div>
</div>
</section>
<section class="slide level3">



</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1200,

        height: 800,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>